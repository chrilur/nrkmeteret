library(rvest)
library(Curl=)
library(Curl)
install.packages("Curl")
install.packages("Rcurl")
system("defaults write org.R-project.R force.LANG en_US.UTF-8")
q()
library(RCurl)
library(XML)
url <- "http://www3.bergen.kommune.no/bksak/utv_meetlist.asp?utv=BR1&DB_Source=1"
data <- getURL(url)
data
data.parse <- htmlParse(data)
data.parse
readHTMLTable(data.parse)
readHTMLTable(data.parse)[3]
readHTMLTable(data.parse)[4]
møter <- readHTMLTable(data.parse)[4]
møter
str(møter)
as.table(møter)
møter <- table(readHTMLTable(data.parse)[4])
møter <- as.table(readHTMLTable(data.parse)[4])
møter <- readHTMLTable(data.parse)[4]
møter
bokstav <- function(x){gsub("Ã¥", "å", x)}
bokstav(møter)
unlist(møter)
str(møter)
bokstav <- function(x){gsub("Ã¥", "å", x), gsub("Ã¸", "ø", x)}
bokstav <- function(x){gsub("Ã¥", "å", x), gsub("Ã¸", "ø", x)}
bokstav <- function(x){gsub("Ã¥", "å", x) gsub("Ã¸", "ø", x)}
bokstav <- function(x){gsub("Ã¥", "å", x) gsub("Ã¸", "ø", x)}
bokstav <- function(x){
x <- gsub("Ã¥", "å", x)
x <- gsub("Ã¸", "ø", x)}
bokstav(møter)
møter
møter <- bokstav(møter)
møter
data.parse <- htmlParse(data)
møter <- readHTMLTable(data.parse)[4]
møter
data.parse
readHTMLTable(data.parse)34]
readHTMLTable(data.parse)[3]
readHTMLTable(data.parse)[5]
readHTMLTable(data.parse)[6]
readHTMLTable(data.parse)[7]
readHTMLTable(data.parse)[8]
readHTMLTable(data.parse)[9]
readHTMLTable(data.parse)[1]
readHTMLTable(data.parse)[2]
data.parse
navn <- as.character(lapply(data.parse['//li[@class="list2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//td[@class="list2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//[@class="list2"]'],xmlValue))
navn <- as.character(lapply(data.parse['[@class="list2"]'],xmlValue))
navn <- as.character(lapply(data.parse['//td[@class="list2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//tr[@class="list2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//table[@class="list2"]'],xmlValue))
navn
data.parse
navn <- as.character(lapply(data.parse['//td[@class="LIST2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//li[@class="LIST2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//tr[@class="LIST2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//td[@class="LIST2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//td[@class="LIST2C"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//td[@class="list2"]'],xmlValue))
navn
data.parse
navn <- as.character(lapply(data.parse['//td[@class="list2b"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//href[@class="LIST2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//title[@class="LIST2"]'],xmlValue))
navn
navn <- as.character(lapply(data.parse['//td[@class="LIST2"]'],xmlValue))
navn
library(RCurl)
library(XML)
url <- "http://www3.bergen.kommune.no/bksak/utv_meetinfo.asp?meetid=13052"
myURL <- getURL(url)
myURL
myURL <- "http://www3.bergen.kommune.no/bksak/utv_meetinfo.asp?meetid=13052"
agent <- "Mozilla/5.0 (Windows NT 6.3; WOW64; rv:32.0) Gecko/20100101          Firefox/32.0"
curl = getCurlHandle()
curlSetOpt(cookiejar="cookies.txt",  useragent = agent, followlocation = TRUE, curl=curl)
firstPage <- getURL("http://www.bergen.kommune.no/bksak/default.asp", curl=curl)
myPage <- getURL(myURL, curl = curl)
myPage
62948/7
myPage <- getURL(myURL, curl = curl)
440839/7
308439/7
ses <- 41401+33087+39846+75806+48637+14017+8771
ses/7
ses
fiks.nrk <- function(filnavn) {
navn <- paste0("data/", filnavn)
fil <- read.csv(navn, stringsAsFactors=FALSE)
fil <- fil[2:56,]
fil <- data.frame(cbind(fil[,5], fil[,3], fil[,2]))
fil <- sapply(fil, function(v) {as.numeric(gsub("\\,","", as.character(v)))})
fil <- as.data.frame(fil)
names(fil) <- c("ub", "bs", "sv")
write.table(fil, navn, sep=",", row.names=FALSE)
}
setwd("C:\\Users\\n633164\\Documents\\R\\nrkmeter\\nrkmeteret")
fil <- read.csv("data/dkhomob_rå.csv", stringsAsFactors=FALSE)
fil
fil[66,]
length(fil)
length(fil,)
length(fil[,1])
slutt<- length(fil[,1])-2
slutt
fiks.nrk <- function(filnavn) {
navn <- paste0("data/", filnavn)
fil <- read.csv(navn, stringsAsFactors=FALSE)
slutt <- length(fil[,1])-2
fil <- fil[2:slutt,]
fil <- data.frame(cbind(fil[,5], fil[,3], fil[,2]))
fil <- sapply(fil, function(v) {as.numeric(gsub("\\,","", as.character(v)))})
fil <- as.data.frame(fil)
names(fil) <- c("ub", "bs", "sv")
write.table(fil, navn, sep=",", row.names=FALSE)
}
fiks.nrk("dkhomob_rå.csv")
fil <- read.csv("data/navn, stringsAsFactors=FALSE)
navn <- "data/dkhonett_rå.csv"
fil <- read.csv(navn, stringsAsFactors=FALSE)
fil''
fil
slutt <- length(fil[,1])-2
fil <- fil[2:slutt,]
fil
fil <- data.frame(cbind(fil[,5], fil[,3], fil[,2]))
fil
fil <- read.csv(navn, stringsAsFactors=FALSE)
slutt <- length(fil[,1])-2
fil <- fil[2:slutt,]
fil
navn <- paste0("data/", filnavn)
fil <- read.csv(navn, stringsAsFactors=FALSE)
slutt <- length(fil[,1])-2
fil <- fil[8:slutt,]
fil <- data.frame(cbind(fil[,5], fil[,3], fil[,2]))
fil
fil <- sapply(fil, function(v) {as.numeric(gsub("\\,","", as.character(v)))})
fil <- as.data.frame(fil)
names(fil) <- c("ub", "bs", "sv")
fil
fil/7
fil <- round(fil/7, digits=0)
fil
navn
write.table(fil, "data/dkhonett.csv", sep=",", row.names=FALSE)
fil <- read.csv("data/dkhomob_rå.csv", stringsAsFactors=FALSE)
fil
fil <- round(fil/7, digits=0)
fil
write.table(fil, "data/dkhomob.csv", sep=",", row.names=FALSE)
dato <- as.character(Sys.Date())
dato
uke <- as.integer(format(as.Date(dato), "%W"))-1
uke
source("skraptns.R")
204418/7
cli <- 34270+39751+75708+32961+14879+31254+22715
cli/7
204418/7
323862/7
